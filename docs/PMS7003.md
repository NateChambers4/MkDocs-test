# PMS7003

## **Connect PMS7003 and Bojack DHT11 Sensors to Raspberry Pi 3**

This guide provides instructions on how to connect a PMS7003 Particle Matter Sensor and a Bojack DHT11 Temperature and Humidity Sensor to a Raspberry Pi 3 running Raspbian and use the Python script `tPMS_blynk.py` to read and send data from the sensors.

## Sensor Connection Guide

### Bojack DHT11 Sensor
1. Connect the `-` pin of the DHT11 sensor to the ground (GND) pin 9 on the Raspberry Pi 3.
2. Connect the `+` pin of the DHT11 sensor to the 5V power pin 2 on the Raspberry Pi 3.
3. Connect the `OUT` pin of the DHT11 sensor to GPIO 17 pin 11 on the Raspberry Pi 3.

### PMS7003 Particle Matter Sensor
1. Connect the `VCC` pin of the PMS sensor to the 5V power pin 4 on the Raspberry Pi 3.
2. Connect the `GND` pin of the PMS sensor to the ground (GND) pin 6 on the Raspberry Pi 3.
3. Connect the `RX` pin of the PMS sensor to GPIO 15 (RXD) pin 10 on the Raspberry Pi 3.
4. Connect the `TX` pin of the PMS sensor to GPIO 14 (TXD) pin 8 on the Raspberry Pi 3.

This is a GPIO pin layout diagram for Raspberry Pi 3:

![GPIO Pinout Diagram](https://www.raspberrypi.com/documentation/computers/images/GPIO-Pinout-Diagram-2.png)

After correctly connecting the sensors to your Raspberry Pi, you can now run the Python script to collect and send sensor data. Please follow the steps in the previously provided guide to run the `tPMS_blynk.py` script.

## Safety Note
Remember, when working with electronic components, always turn off the power supply when connecting or disconnecting sensors or other components. This will help prevent accidental damage.

## Troubleshooting
- If your script fails to read data from the sensors, check the wiring again to make sure all connections are correct and secure.
- Ensure that the pins used in the script match the pins you have connected your sensors to. In this guide, DHT11's OUT pin is connected to GPIO 17 (pin 11) and PMS's RX and TX pins are connected to GPIO 15 (pin 10) and GPIO 14 (pin 8) respectively. You may need to adjust your script if your connections differ.



-------------------------
##
##


## **How to run `tPMS_blynk.py` on Raspberry Pi running Raspbian**

This guide explains how to run the Python script `tPMS_blynk.py` on a Raspberry Pi running the Raspbian operating system. The script collects data from a DHT11 or DHT22 temperature and humidity sensor and a PMS7003 particle matter sensor and sends the data to Blynk.

## Prerequisites

1. Your Raspberry Pi is running the Raspbian operating system.
2. You have configured the Raspberry Pi's serial port settings:
   - Open the Raspberry Pi configuration settings by running `sudo raspi-config` in the terminal.
   - Navigate to "Interface Options" -> "Serial Port".
   - Ensure that the Serial Port is enabled, and the Serial Console is disabled.
3. Python 3 is installed. You can check the installed Python version by running `python3 --version` in the terminal.
4. Required Python libraries: BlynkLib, pigpio_dht, pandas. You can install these by running `pip3 install BlynkLib pigpio_dht pms7003 pandas`.
5. Install numpy: `sudo apt-get install libatlas-base-dev`
6. Open your terminal and execute the following commands to install the necessary libraries and clone the Blynk Python library: `git clone https://github.com/vshymanskyy/blynk-library-python.git`.
7. Place the `tPMS_blynk.py` script into the `blynk-library-python` folder


## Steps to Run the Script

1. Open the terminal.
3. If not already done, run the Pigpio daemon. The daemon provides access to the GPIO pins of the Raspberry Pi, which is necessary for reading data from the sensors. Run the daemon by entering `sudo pigpiod` in the terminal.
4. Run the script by entering `python3 /home/pi/blynk-library-python/tPMS_blynk.py` in the terminal.
5. The script will now run indefinitely until stopped. While running, it will collect data from the sensors every two seconds and send this data to Blynk.

### Stopping the Script

- To stop the script, press `Ctrl + C` in the terminal. This will terminate the script.

## Troubleshooting

- If you encounter a `DHT sensor failure. Check wiring.` error, check the connection of your DHT sensor to the Raspberry Pi. Ensure that the data pin of the sensor is connected to the correct GPIO pin on the Raspberry Pi.
- If you encounter errors while reading from the PMS sensor or sending data to Blynk, these may be due to temporary issues like a poor internet connection. The script will continue running and try again during the next interval.
- If the script cannot connect to the Pigpio daemon, make sure the daemon is running. You can start it by running `sudo pigpiod` in the terminal. If the error persists, the issue may be due to the daemon's host or port settings. Check these settings and try again.
  
Remember to replace `BLYNK_AUTH_TOKEN` with your actual Blynk authentication token and adjust `DHT_SENSOR` and `DHT_PIN` if necessary.

Note: This guide assumes you've wired your sensors correctly and that your Blynk setup is configured correctly. It focuses on running the Python script and doesn't cover the hardware setup or Blynk configuration.

---------------
##
##

## **Understanding the Data**

This system collects environmental data, including temperature, humidity, and particulate matter concentrations in the air. This section provides a detailed breakdown of the data output:

### 1. Temperature (`temp_f`)

- **Unit**: Degrees Fahrenheit (°F)
- **Description**: 
  - Represents the ambient temperature where the DHT sensor is placed.

### 2. Humidity (`humidity`)

- **Unit**: Percentage (%)
- **Description**: 
  - Measures the relative humidity of the environment. This value represents the amount of moisture in the air compared to the maximum it can hold at the same temperature.

### 3. Particulate Matter (from PMS sensor)

The PMS7003 sensor quantifies particulate matter (PM) concentrations for distinct particle sizes. Particulate matter consists of tiny liquid droplets and solid particles in the air, such as dust, pollen, soot, and smoke. 

- **Categories**:
  - **PM1.0 (`pm1_0` and `pm1_0_2` for the second sensor)**
  - **PM2.5 (`pm2_5` and `pm2_5_2` for the second sensor)**
  - **PM10 (`pm10` and `pm10_2` for the second sensor)**
  
- **Unit**: µg/m³ (micrograms per cubic meter)
- **Description**:
  - These metrics represent the concentration of particulates in the air for particles with diameters less than or equal to 1.0, 2.5, and 10 micrometers, respectively. For example, PM2.5 pertains to particles that are 2.5 micrometers or smaller, which are especially relevant for health due to their capability to penetrate deep into the lungs.

### 4. Number of Particles

The system measures the particle count for various sizes per 0.1 liter of air:

- **Fields**: 
  - Examples include `n0_3`, `n0_5`, `n1_0`, `n2_5`, `n5_0`, and `n10` (with `_2` variants for the second sensor).

- **Unit**: Count per 0.1L of air.
- **Description**:
  - Indicates how many particles of a specific size (e.g., 0.3 micrometers) are found in every 0.1 liter of air.

